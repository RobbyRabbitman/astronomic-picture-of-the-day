(self.webpackChunkastronomy_picture_of_the_day=self.webpackChunkastronomy_picture_of_the_day||[]).push([[102],{2102:(t,n,e)=>{"use strict";e.r(n),e.d(n,{ApodModule:()=>W});var o=e(8542),a=e(2852),i=e(8494),r=e(1041),c=e(7064),s=e(7336),p=e(5241);const l="date";var d=e(8512),u=e(9764),g=e(653),h=e(878),m=e(3835),f=e(9996),x=e(4019),_=e(4689),w=e(7727),b=e(8414),C=e(5366);const v=new C.OlP("Min date of apod"),Z=new C.OlP("Min date of apod");var y=e(2438),M=e(3028),O=e(5965),P=e(1116),Y=e(7112),$=e(3070),A=e(9550),D=e(9024),T=e(7672),k=e(2797),I=e(6742),J=e(7761),q=e(3733);function Q(t,n){if(1&t&&C._UZ(0,"app-image",5),2&t){const t=C.oxw(2);C.Q6J("src",t.apod.url)("title",t.apod.imageTitle)}}function S(t,n){if(1&t&&C._UZ(0,"app-youtube-player",6),2&t){const t=C.oxw(2);C.Q6J("videoId",t.apod.youtubeVideoId)}}function L(t,n){if(1&t&&(C.TgZ(0,"mat-card"),C.TgZ(1,"mat-card-header"),C.TgZ(2,"mat-card-title"),C._uU(3),C.qZA(),C.TgZ(4,"mat-card-subtitle"),C._uU(5),C.ALo(6,"date"),C.qZA(),C.qZA(),C.TgZ(7,"mat-card-content",1),C.ynx(8,2),C.YNc(9,Q,1,2,"app-image",3),C.YNc(10,S,1,1,"app-youtube-player",4),C.BQk(),C.TgZ(11,"p"),C._uU(12),C.qZA(),C.qZA(),C.qZA()),2&t){const t=C.oxw();C.xp6(3),C.hij(" ",t.apod.title," "),C.xp6(2),C.hij(" ",C.lcZ(6,6,t.apod.date)," "),C.xp6(3),C.Q6J("ngSwitch",t.apod.media_type),C.xp6(1),C.Q6J("ngSwitchCase","image"),C.xp6(1),C.Q6J("ngSwitchCase","video"),C.xp6(2),C.Oqu(t.apod.explanation)}}let U=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=C.Xpm({type:t,selectors:[["app-apod-card"]],inputs:{apod:"apod"},decls:1,vars:1,consts:[[4,"ngIf"],["id","content"],[3,"ngSwitch"],["id","picture","appImageLightbox","",3,"src","title",4,"ngSwitchCase"],[3,"videoId",4,"ngSwitchCase"],["id","picture","appImageLightbox","",3,"src","title"],[3,"videoId"]],template:function(t,n){1&t&&C.YNc(0,L,13,8,"mat-card",0),2&t&&C.Q6J("ngIf",n.apod)},directives:[P.O5,k.a8,k.dk,k.n5,k.$j,k.dn,P.RF,P.n9,I.c,J.z,q.O],pipes:[P.uU],styles:["app-apod-card #content{display:flex;flex-direction:column;grid-gap:1rem;gap:1rem}app-apod-card #content #picture img{max-height:50vh;object-fit:contain}"],encapsulation:2,changeDetection:0}),t})();var N=e(4369),F=e(7307);function B(t,n){1&t&&C._UZ(0,"mat-spinner",15)}function E(t,n){if(1&t&&(C._UZ(0,"app-apod-card",16),C.ALo(1,"async")),2&t){const t=C.oxw();C.Q6J("apod",C.lcZ(1,1,t.apod$))}}function X(t,n){if(1&t){const t=C.EpF();C.TgZ(0,"button",17),C.NdJ("click",function(){const n=C.CHM(t).ngIf;return C.oxw().next(n)}),C.TgZ(1,"mat-icon",18),C._uU(2,"navigate_before"),C.qZA(),C.qZA()}if(2&t){const t=n.ngIf,e=C.oxw();C.Q6J("disabled",t.getTime()<=e.minDate.getTime()),C.xp6(1),C.Q6J("inline",!0)}}function j(t,n){if(1&t){const t=C.EpF();C.TgZ(0,"button",19),C.NdJ("click",function(){C.CHM(t);const n=C.oxw();return n.next(n._randomDateBetween(n.minDate,n.maxDate))}),C.TgZ(1,"mat-icon",18),C._uU(2,"shuffle"),C.qZA(),C.qZA()}2&t&&(C.xp6(1),C.Q6J("inline",!0))}function z(t,n){if(1&t){const t=C.EpF();C.TgZ(0,"button",17),C.NdJ("click",function(){const n=C.CHM(t).ngIf;return C.oxw().next(n)}),C.TgZ(1,"mat-icon",20),C._uU(2,"navigate_next"),C.qZA(),C.qZA()}if(2&t){const t=n.ngIf,e=C.oxw();C.Q6J("disabled",t.getTime()>=e.maxDate.getTime()),C.xp6(1),C.Q6J("inline",!0)}}const H={parse:{dateInput:"LL"},display:{dateInput:"YYYY-MM-DD",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}},V=[{path:"",component:(()=>{class t{constructor(t,n,e,o,a,i,r,c){this.route=t,this.router=n,this.store=e,this.errorService=o,this.layout=a,this.logger=i,this.minDate=r,this.maxDate=c,this.readonlyTextInput=!0,this._randomDateBetween=p.I}get apod$(){return this._apod$.asObservable()}get dateControl(){return this._dateControl}get small$(){return this._small$}get loading$(){return this._loading$.asObservable()}get backward$(){return this._backward$.asObservable().pipe((0,m.h)(t=>null!=t))}get forward$(){return this._forward$.asObservable().pipe((0,m.h)(t=>null!=t))}ngOnInit(){this._apod$=new d.X(null),this._forward$=new d.X(null),this._backward$=new d.X(null),this._loading$=new d.X(!1),this._small$=this.layout.observe([i.u3.XSmall,i.u3.XSmall]).pipe((0,f.U)(t=>t.matches)),this._dateControl=new r.NI(null,[r.kI.required]),this._dateControl.valueChanges.pipe((0,m.h)(t=>this._dateControl.valid),(0,f.U)(t=>new Date(t)),(0,x.b)(t=>{var n;return null===(n=this.logger)||void 0===n?void 0:n.trace(`Date formcontrol value: ${(0,p.b)(t)}`)})).subscribe({next:t=>this.next(t)}),this.route.queryParams.pipe((0,x.b)(t=>this._apod$.next(null)),(0,x.b)(t=>this._loading$.next(!0)),function(...t){const n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return e=>(0,f.U)(function(t,n){return e=>{let o=e;for(let a=0;a<n;a++){const n=null!=o?o[t[a]]:void 0;if(void 0===n)return;o=n}return o}}(t,n))(e)}(l),(0,x.b)(t=>{var n;return null===(n=this.logger)||void 0===n?void 0:n.trace(`date route param: ${t}`)}),(0,f.U)(t=>new Date(t)),(0,_.w)(t=>{return isNaN(t.getTime())?(0,u.D)(this.next(new Date)).pipe((n=g.E,(0,_.w)(()=>n))):(0,h.of)(t);var n}),(0,x.b)(t=>this._dateControl.setValue(t,{emitEvent:!1})),(0,x.b)(t=>{this._forward$.next(new Date(t.getFullYear(),t.getMonth(),t.getDate()+1)),this._backward$.next(new Date(t.getFullYear(),t.getMonth(),t.getDate()-1))}),(0,_.w)(t=>this.store.dispatchApod(t).pipe((0,x.b)(t=>this._loading$.next(!1)),(0,w.K)(n=>{let e;switch(this._loading$.next(!1),n.status){case 400:e={message:`No image for ${t.toLocaleDateString()} ${String.fromCodePoint(128546)}`,name:n.statusText};break;case 429:e={message:`This site requests data from Nasa, which is rate limited ${String.fromCodePoint(128546)}`,name:n.statusText}}return this.errorService.showErrorInDialog(e).pipe((0,x.b)(t=>this.next(new Date)),(0,b.h)(null))})))).subscribe({next:t=>this._apod$.next(t)})}next(t){return n=this,void 0,o=function*(){return this.router.navigate([],{queryParams:{[l]:(0,p.b)(t)}})},new((e=void 0)||(e=Promise))(function(t,a){function i(t){try{c(o.next(t))}catch(n){a(n)}}function r(t){try{c(o.throw(t))}catch(n){a(n)}}function c(n){var o;n.done?t(n.value):(o=n.value,o instanceof e?o:new e(function(t){t(o)})).then(i,r)}c((o=o.apply(n,[])).next())});var n,e,o}}return t.\u0275fac=function(n){return new(n||t)(C.Y36(a.gz),C.Y36(a.F0),C.Y36(y.d6),C.Y36(M.T_),C.Y36(i.Yg),C.Y36(s.bZ,8),C.Y36(v,8),C.Y36(Z,8))},t.\u0275cmp=C.Xpm({type:t,selectors:[["app-apod"]],features:[C._Bn([{provide:c.sG,useValue:H},{provide:v,useValue:new Date(1995,5,16)},{provide:Z,useValue:new Date}])],decls:19,vars:18,consts:[["fxLayout","column",1,"page"],["fxFlex","1 1 auto","fxLayout","column","fxLayoutAlign","start center",1,"content-container"],[1,"content"],[3,"ngSwitch"],["color","accent","class","center-abs-xy",4,"ngSwitchCase"],["class","apod-card",3,"apod",4,"ngSwitchCase"],["fxFlex","0 0 auto"],["fxLayoutAlign","center center","fxLayoutGap","1rem","color","accent"],["class","nav-button","mat-icon-button","",3,"disabled","click",4,"ngIf"],["fxFlex","1 1 140px"],["autocomplete","off","matInput","",3,"readonly","matDatepicker","formControl","min","max"],["matSuffix","",3,"for"],["color","accent"],["picker",""],["class","random-date-button","mat-icon-button","",3,"click",4,"ngIf"],["color","accent",1,"center-abs-xy"],[1,"apod-card",3,"apod"],["mat-icon-button","",1,"nav-button",3,"disabled","click"],[3,"inline"],["mat-icon-button","",1,"random-date-button",3,"click"],[1,"nav-icon",3,"inline"]],template:function(t,n){if(1&t&&(C.TgZ(0,"section",0),C.TgZ(1,"div",1),C.TgZ(2,"section",2),C.ynx(3,3),C.ALo(4,"async"),C.YNc(5,B,1,0,"mat-spinner",4),C.YNc(6,E,2,3,"app-apod-card",5),C.BQk(),C.qZA(),C.qZA(),C.TgZ(7,"footer",6),C.TgZ(8,"mat-toolbar",7),C.YNc(9,X,3,2,"button",8),C.ALo(10,"async"),C.TgZ(11,"mat-form-field",9),C._UZ(12,"input",10),C._UZ(13,"mat-datepicker-toggle",11),C._UZ(14,"mat-datepicker",12,13),C.qZA(),C.YNc(16,j,3,1,"button",14),C.YNc(17,z,3,2,"button",8),C.ALo(18,"async"),C.qZA(),C.qZA(),C.qZA()),2&t){const t=C.MAs(15);C.xp6(3),C.Q6J("ngSwitch",C.lcZ(4,12,n.loading$)),C.xp6(2),C.Q6J("ngSwitchCase",!0),C.xp6(1),C.Q6J("ngSwitchCase",!1),C.xp6(3),C.Q6J("ngIf",C.lcZ(10,14,n.backward$)),C.xp6(3),C.Q6J("readonly",n.readonlyTextInput)("matDatepicker",t)("formControl",n.dateControl)("min",n.minDate)("max",n.maxDate),C.xp6(1),C.Q6J("for",t),C.xp6(3),C.Q6J("ngIf",n.minDate&&n.maxDate),C.xp6(1),C.Q6J("ngIf",C.lcZ(18,16,n.forward$))}},directives:[O.xw,O.yH,O.Wh,P.RF,P.n9,Y.Ye,O.SQ,P.O5,$.KE,A.Nt,D.hl,r.Fj,r.JJ,r.oH,D.nW,$.R9,D.Mq,T.$g,U,N.lW,F.Hw],pipes:[P.Ov],styles:["[_nghost-%COMP%] > .page[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > .content-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > .content-container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{padding:1rem}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > .content-container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .apod-card[_ngcontent-%COMP%]{display:block;max-width:960px}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > footer[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > footer[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{width:50px;height:50px;line-height:50px}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > footer[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:50px;width:50px;height:50px;line-height:50px}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > footer[_ngcontent-%COMP%]   .random-date-button[_ngcontent-%COMP%]{width:30px;height:30px;line-height:30px}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > footer[_ngcontent-%COMP%]   .random-date-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:30px;width:30px;height:30px;line-height:30px}"]}),t})()}];let R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=C.oAB({type:t}),t.\u0275inj=C.cJS({imports:[[a.Bz.forChild(V)],a.Bz]}),t})(),W=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=C.oAB({type:t}),t.\u0275inj=C.cJS({imports:[[o.m,R]]}),t})()}}]);