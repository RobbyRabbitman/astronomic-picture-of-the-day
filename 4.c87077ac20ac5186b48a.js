(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{jTNt:function(t,e,n){"use strict";n.r(e),n.d(e,"ApodModule",function(){return G});var a=n("PCNd"),o=n("tyNb"),c=n("0MNC"),r=n("3Pt+"),i=n("FKr1"),s=n("rW8v"),b=n("pM24");const l="date";var d=n("2Vo4"),p=n("Cfvw"),u=n("EY2u"),f=n("LRne"),h=n("pLZG"),g=n("lJxs"),m=n("vkgz"),O=n("eIep"),w=n("JIr8"),x=n("CqXF"),v=n("fXoL"),y=n("dJ3e"),_=n("1ua0"),P=n("XiUz"),C=n("ofXK"),j=n("/t3+"),$=n("kmnG"),L=n("qFsG"),k=n("iadO"),A=n("Xa2L"),I=n("Wp6s"),M=n("GYBK");function Y(t,e){if(1&t&&(v.Pb(0,"mat-card"),v.Pb(1,"mat-card-header"),v.Pb(2,"mat-card-title"),v.sc(3),v.Ob(),v.Pb(4,"mat-card-subtitle"),v.sc(5),v.bc(6,"date"),v.Ob(),v.Ob(),v.Pb(7,"mat-card-content",1),v.Lb(8,"app-image",2),v.Pb(9,"p"),v.sc(10),v.Ob(),v.Ob(),v.Ob()),2&t){const t=v.ac();v.Ab(3),v.uc(" ",t.apod.title," "),v.Ab(2),v.uc(" ",v.cc(6,5,t.apod.date)," "),v.Ab(3),v.fc("src",t.apod.url)("title",t._buildImageTitle(t.apod)),v.Ab(2),v.tc(t.apod.explanation)}}let D=(()=>{class t{_buildImageTitle(t){return t.title&&t.copyright?`${t.title}, copyright by ${t.copyright}`:t.title?t.title:t.copyright?t.copyright:"Astronomic Picture of "+t.date}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=v.Eb({type:t,selectors:[["app-apod-card"]],inputs:{apod:"apod"},decls:1,vars:1,consts:[[4,"ngIf"],["id","content"],["id","picture",3,"src","title"]],template:function(t,e){1&t&&v.rc(0,Y,11,7,"mat-card",0),2&t&&v.fc("ngIf",e.apod)},directives:[C.l,I.a,I.c,I.f,I.e,I.b,M.a],pipes:[C.e],styles:["app-apod-card #content{display:flex;flex-direction:column;gap:1rem}app-apod-card #content #picture img{max-height:75vh;object-fit:contain}"],encapsulation:2,changeDetection:0}),t})();var S=n("bTqV"),N=n("NFeN");function T(t,e){1&t&&v.Lb(0,"mat-spinner",11)}function K(t,e){if(1&t&&(v.Lb(0,"app-apod-card",12),v.bc(1,"async")),2&t){const t=v.ac();v.fc("apod",v.cc(1,1,t.apod$))}}function X(t,e){if(1&t){const t=v.Qb();v.Pb(0,"button",13),v.Xb("click",function(){v.jc(t);const n=e.ngIf;return v.ac().next(n)}),v.Pb(1,"mat-icon",14),v.sc(2,"navigate_before"),v.Ob(),v.Ob()}2&t&&(v.Ab(1),v.fc("inline",!0))}function q(t,e){if(1&t){const t=v.Qb();v.Pb(0,"button",13),v.Xb("click",function(){v.jc(t);const n=e.ngIf;return v.ac().next(n)}),v.Pb(1,"mat-icon",14),v.sc(2,"navigate_next"),v.Ob(),v.Ob()}2&t&&(v.Ab(1),v.fc("inline",!0))}const F={parse:{dateInput:"LL"},display:{dateInput:"YYYY-MM-DD",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}},E=[{path:"",component:(()=>{class t{constructor(t,e,n,a,o,c){this.route=t,this.router=e,this.store=n,this.errorService=a,this.layout=o,this.logger=c,this.readonlyTextInput=!0}get apod$(){return this._apod$.asObservable()}get dateControl(){return this._dateControl}get small$(){return this._small$}get loading$(){return this._loading$.asObservable()}get backward$(){return this._backward$.asObservable().pipe(Object(h.a)(t=>null!=t))}get forward$(){return this._forward$.asObservable().pipe(Object(h.a)(t=>null!=t))}ngOnInit(){this._apod$=new d.a(null),this._forward$=new d.a(null),this._backward$=new d.a(null),this._loading$=new d.a(!1),this._small$=this.layout.observe([c.b.XSmall,c.b.XSmall]).pipe(Object(g.a)(t=>t.matches)),this._dateControl=new r.c(null,[r.l.required]),this._dateControl.valueChanges.pipe(Object(h.a)(t=>this._dateControl.valid),Object(g.a)(t=>new Date(t)),Object(m.a)(t=>{var e;return null===(e=this.logger)||void 0===e?void 0:e.trace("Date formcontrol value: "+Object(b.a)(t))})).subscribe({next:t=>this.next(t)}),this.route.queryParams.pipe(Object(m.a)(t=>this._apod$.next(null)),Object(m.a)(t=>this._loading$.next(!0)),function(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>Object(g.a)(function(t,e){return n=>{let a=n;for(let o=0;o<e;o++){const e=null!=a?a[t[o]]:void 0;if(void 0===e)return;a=e}return a}}(t,e))(n)}(l),Object(m.a)(t=>{var e;return null===(e=this.logger)||void 0===e?void 0:e.trace("date route param: "+t)}),Object(g.a)(t=>new Date(t)),Object(O.a)(t=>{return isNaN(t.getTime())?Object(p.a)(this.next(new Date)).pipe((e=u.a,Object(O.a)(()=>e))):Object(f.a)(t);var e}),Object(m.a)(t=>this._dateControl.setValue(t,{emitEvent:!1})),Object(m.a)(t=>{this._forward$.next(new Date(t.getFullYear(),t.getMonth(),t.getDate()+1)),this._backward$.next(new Date(t.getFullYear(),t.getMonth(),t.getDate()-1))}),Object(O.a)(t=>this.store.dispatchApod(t).pipe(Object(m.a)(t=>this._loading$.next(!1)),Object(w.a)(e=>{let n;switch(this._loading$.next(!1),e.status){case 400:n={message:`No image for ${t.toLocaleDateString()} yet ${String.fromCodePoint(128546)}`,name:e.statusText};break;case 429:n={message:"This site requests data from Nasa, which is rate limited "+String.fromCodePoint(128546),name:e.statusText}}return this.errorService.showErrorInDialog(n).pipe(Object(m.a)(t=>this.next(new Date)),Object(x.a)(null))})))).subscribe({next:t=>this._apod$.next(t)})}next(t){return e=this,void 0,a=function*(){return this.router.navigate([],{queryParams:{[l]:Object(b.a)(t)}})},new((n=void 0)||(n=Promise))(function(t,o){function c(t){try{i(a.next(t))}catch(e){o(e)}}function r(t){try{i(a.throw(t))}catch(e){o(e)}}function i(e){var a;e.done?t(e.value):(a=e.value,a instanceof n?a:new n(function(t){t(a)})).then(c,r)}i((a=a.apply(e,[])).next())});var e,n,a}}return t.\u0275fac=function(e){return new(e||t)(v.Kb(o.a),v.Kb(o.b),v.Kb(y.c),v.Kb(_.a),v.Kb(c.a),v.Kb(s.b,8))},t.\u0275cmp=v.Eb({type:t,selectors:[["app-apod"]],features:[v.zb([{provide:i.c,useValue:F}])],decls:16,vars:15,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"content"],[1,"apod-container",3,"ngSwitch"],["class","center-abs-xy",4,"ngSwitchCase"],[3,"apod",4,"ngSwitchCase"],["fxLayoutAlign","center center","fxLayoutGap","1rem","color","accent"],["mat-icon-button","",3,"click",4,"ngIf"],["fxFlex","1 1 140px"],["autocomplete","off","matInput","",3,"readonly","matDatepicker","formControl"],["matSuffix","",3,"for"],["color","accent"],["picker",""],[1,"center-abs-xy"],[3,"apod"],["mat-icon-button","",3,"click"],[3,"inline"]],template:function(t,e){if(1&t&&(v.Pb(0,"section",0),v.Pb(1,"div",1),v.bc(2,"async"),v.rc(3,T,1,0,"mat-spinner",2),v.rc(4,K,2,3,"app-apod-card",3),v.Ob(),v.Ob(),v.Pb(5,"footer"),v.Pb(6,"mat-toolbar",4),v.rc(7,X,3,1,"button",5),v.bc(8,"async"),v.Pb(9,"mat-form-field",6),v.Lb(10,"input",7),v.Lb(11,"mat-datepicker-toggle",8),v.Lb(12,"mat-datepicker",9,10),v.Ob(),v.rc(14,q,3,1,"button",5),v.bc(15,"async"),v.Ob(),v.Ob()),2&t){const t=v.hc(13);v.Ab(1),v.fc("ngSwitch",v.cc(2,9,e.loading$)),v.Ab(2),v.fc("ngSwitchCase",!0),v.Ab(1),v.fc("ngSwitchCase",!1),v.Ab(3),v.fc("ngIf",v.cc(8,11,e.backward$)),v.Ab(3),v.fc("readonly",e.readonlyTextInput)("matDatepicker",t)("formControl",e.dateControl),v.Ab(1),v.fc("for",t),v.Ab(3),v.fc("ngIf",v.cc(15,13,e.forward$))}},directives:[P.c,P.b,C.n,C.o,j.a,P.d,C.l,$.b,P.a,L.b,k.b,r.b,r.i,r.d,k.d,$.e,k.a,A.b,D,S.b,N.a],pipes:[C.b],styles:[".apod-container[_ngcontent-%COMP%]{max-width:600px}footer[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:1;width:100%;overflow:hidden}footer[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:50px;height:50px;line-height:50px}footer[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:50px}.content[_ngcontent-%COMP%]{min-height:100%;padding:1rem}"]}),t})()}];let z=(()=>{class t{}return t.\u0275mod=v.Ib({type:t}),t.\u0275inj=v.Hb({factory:function(e){return new(e||t)},imports:[[o.d.forChild(E)],o.d]}),t})(),G=(()=>{class t{}return t.\u0275mod=v.Ib({type:t}),t.\u0275inj=v.Hb({factory:function(e){return new(e||t)},imports:[[a.a,z]]}),t})()}}]);