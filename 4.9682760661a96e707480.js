(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{jTNt:function(t,e,n){"use strict";n.r(e),n.d(e,"ApodModule",function(){return H});var a=n("PCNd"),o=n("tyNb"),c=n("0MNC"),i=n("3Pt+"),r=n("FKr1"),s=n("rW8v"),b=n("pM24");const l="date";var p=n("2Vo4"),d=n("Cfvw"),u=n("EY2u"),f=n("LRne"),g=n("pLZG"),h=n("lJxs"),m=n("vkgz"),O=n("eIep"),w=n("JIr8"),x=n("CqXF"),v=n("fXoL"),C=n("dJ3e"),_=n("1ua0"),P=n("XiUz"),y=n("ofXK"),M=n("/t3+"),j=n("kmnG"),$=n("qFsG"),L=n("iadO"),I=n("Xa2L"),A=n("Wp6s"),S=n("GYBK"),k=n("KLmx");function Y(t,e){if(1&t&&v.Lb(0,"app-image",5),2&t){const t=v.ac(2);v.fc("src",t.apod.url)("title",t.apod.imageTitle)}}function D(t,e){if(1&t&&v.Lb(0,"app-youtube-player",6),2&t){const t=v.ac(2);v.fc("videoId",t.apod.youtubeVideoId)}}function N(t,e){if(1&t&&(v.Pb(0,"mat-card"),v.Pb(1,"mat-card-header"),v.Pb(2,"mat-card-title"),v.tc(3),v.Ob(),v.Pb(4,"mat-card-subtitle"),v.tc(5),v.bc(6,"date"),v.Ob(),v.Ob(),v.Pb(7,"mat-card-content",1),v.Nb(8,2),v.sc(9,Y,1,2,"app-image",3),v.sc(10,D,1,1,"app-youtube-player",4),v.Mb(),v.Pb(11,"p"),v.tc(12),v.Ob(),v.Ob(),v.Ob()),2&t){const t=v.ac();v.Ab(3),v.vc(" ",t.apod.title," "),v.Ab(2),v.vc(" ",v.cc(6,6,t.apod.date)," "),v.Ab(3),v.fc("ngSwitch",t.apod.media_type),v.Ab(1),v.fc("ngSwitchCase","image"),v.Ab(1),v.fc("ngSwitchCase","video"),v.Ab(2),v.uc(t.apod.explanation)}}let K=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=v.Eb({type:t,selectors:[["app-apod-card"]],inputs:{apod:"apod"},decls:1,vars:1,consts:[[4,"ngIf"],["id","content"],[3,"ngSwitch"],["id","picture",3,"src","title",4,"ngSwitchCase"],[3,"videoId",4,"ngSwitchCase"],["id","picture",3,"src","title"],[3,"videoId"]],template:function(t,e){1&t&&v.sc(0,N,13,8,"mat-card",0),2&t&&v.fc("ngIf",e.apod)},directives:[y.l,A.a,A.c,A.f,A.e,A.b,y.n,y.o,S.a,k.a],pipes:[y.e],styles:["app-apod-card #content{display:flex;flex-direction:column;gap:1rem}app-apod-card #content #picture img{max-height:75vh;object-fit:contain}"],encapsulation:2,changeDetection:0}),t})();var F=n("bTqV"),T=n("NFeN");function X(t,e){1&t&&v.Lb(0,"mat-spinner",14)}function q(t,e){if(1&t&&(v.Lb(0,"app-apod-card",15),v.bc(1,"async")),2&t){const t=v.ac();v.fc("apod",v.cc(1,1,t.apod$))}}function E(t,e){if(1&t){const t=v.Qb();v.Pb(0,"button",16),v.Xb("click",function(){v.jc(t);const n=e.ngIf;return v.ac().next(n)}),v.Pb(1,"mat-icon",17),v.tc(2,"navigate_before"),v.Ob(),v.Ob()}2&t&&(v.Ab(1),v.fc("inline",!0))}function G(t,e){if(1&t){const t=v.Qb();v.Pb(0,"button",16),v.Xb("click",function(){v.jc(t);const n=e.ngIf;return v.ac().next(n)}),v.Pb(1,"mat-icon",17),v.tc(2,"navigate_next"),v.Ob(),v.Ob()}2&t&&(v.Ab(1),v.fc("inline",!0))}const J={parse:{dateInput:"LL"},display:{dateInput:"YYYY-MM-DD",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}},V=[{path:"",component:(()=>{class t{constructor(t,e,n,a,o,c){this.route=t,this.router=e,this.store=n,this.errorService=a,this.layout=o,this.logger=c,this.readonlyTextInput=!0}get apod$(){return this._apod$.asObservable()}get dateControl(){return this._dateControl}get small$(){return this._small$}get loading$(){return this._loading$.asObservable()}get backward$(){return this._backward$.asObservable().pipe(Object(g.a)(t=>null!=t))}get forward$(){return this._forward$.asObservable().pipe(Object(g.a)(t=>null!=t))}ngOnInit(){this._apod$=new p.a(null),this._forward$=new p.a(null),this._backward$=new p.a(null),this._loading$=new p.a(!1),this._small$=this.layout.observe([c.b.XSmall,c.b.XSmall]).pipe(Object(h.a)(t=>t.matches)),this._dateControl=new i.c(null,[i.l.required]),this._dateControl.valueChanges.pipe(Object(g.a)(t=>this._dateControl.valid),Object(h.a)(t=>new Date(t)),Object(m.a)(t=>{var e;return null===(e=this.logger)||void 0===e?void 0:e.trace("Date formcontrol value: "+Object(b.a)(t))})).subscribe({next:t=>this.next(t)}),this.route.queryParams.pipe(Object(m.a)(t=>this._apod$.next(null)),Object(m.a)(t=>this._loading$.next(!0)),function(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>Object(h.a)(function(t,e){return n=>{let a=n;for(let o=0;o<e;o++){const e=null!=a?a[t[o]]:void 0;if(void 0===e)return;a=e}return a}}(t,e))(n)}(l),Object(m.a)(t=>{var e;return null===(e=this.logger)||void 0===e?void 0:e.trace("date route param: "+t)}),Object(h.a)(t=>new Date(t)),Object(O.a)(t=>{return isNaN(t.getTime())?Object(d.a)(this.next(new Date)).pipe((e=u.a,Object(O.a)(()=>e))):Object(f.a)(t);var e}),Object(m.a)(t=>this._dateControl.setValue(t,{emitEvent:!1})),Object(m.a)(t=>{this._forward$.next(new Date(t.getFullYear(),t.getMonth(),t.getDate()+1)),this._backward$.next(new Date(t.getFullYear(),t.getMonth(),t.getDate()-1))}),Object(O.a)(t=>this.store.dispatchApod(t).pipe(Object(m.a)(t=>this._loading$.next(!1)),Object(w.a)(e=>{let n;switch(this._loading$.next(!1),e.status){case 400:n={message:`No image for ${t.toLocaleDateString()} yet ${String.fromCodePoint(128546)}`,name:e.statusText};break;case 429:n={message:"This site requests data from Nasa, which is rate limited "+String.fromCodePoint(128546),name:e.statusText}}return this.errorService.showErrorInDialog(n).pipe(Object(m.a)(t=>this.next(new Date)),Object(x.a)(null))})))).subscribe({next:t=>this._apod$.next(t)})}next(t){return e=this,void 0,a=function*(){return this.router.navigate([],{queryParams:{[l]:Object(b.a)(t)}})},new((n=void 0)||(n=Promise))(function(t,o){function c(t){try{r(a.next(t))}catch(e){o(e)}}function i(t){try{r(a.throw(t))}catch(e){o(e)}}function r(e){var a;e.done?t(e.value):(a=e.value,a instanceof n?a:new n(function(t){t(a)})).then(c,i)}r((a=a.apply(e,[])).next())});var e,n,a}}return t.\u0275fac=function(e){return new(e||t)(v.Kb(o.a),v.Kb(o.b),v.Kb(C.c),v.Kb(_.a),v.Kb(c.a),v.Kb(s.d,8))},t.\u0275cmp=v.Eb({type:t,selectors:[["app-apod"]],features:[v.zb([{provide:r.c,useValue:J}])],decls:18,vars:15,consts:[["fxLayout","column",1,"page"],["fxFlex","1 1 auto","fxLayout","column","fxLayoutAlign","start center",1,"content-container"],[1,"content"],[3,"ngSwitch"],["color","accent","class","center-abs-xy",4,"ngSwitchCase"],["class","apod-card",3,"apod",4,"ngSwitchCase"],["fxFlex","0 0 auto"],["fxLayoutAlign","center center","fxLayoutGap","1rem","color","accent"],["mat-icon-button","",3,"click",4,"ngIf"],["fxFlex","1 1 140px"],["autocomplete","off","matInput","",3,"readonly","matDatepicker","formControl"],["matSuffix","",3,"for"],["color","accent"],["picker",""],["color","accent",1,"center-abs-xy"],[1,"apod-card",3,"apod"],["mat-icon-button","",3,"click"],[3,"inline"]],template:function(t,e){if(1&t&&(v.Pb(0,"section",0),v.Pb(1,"div",1),v.Pb(2,"section",2),v.Nb(3,3),v.bc(4,"async"),v.sc(5,X,1,0,"mat-spinner",4),v.sc(6,q,2,3,"app-apod-card",5),v.Mb(),v.Ob(),v.Ob(),v.Pb(7,"footer",6),v.Pb(8,"mat-toolbar",7),v.sc(9,E,3,1,"button",8),v.bc(10,"async"),v.Pb(11,"mat-form-field",9),v.Lb(12,"input",10),v.Lb(13,"mat-datepicker-toggle",11),v.Lb(14,"mat-datepicker",12,13),v.Ob(),v.sc(16,G,3,1,"button",8),v.bc(17,"async"),v.Ob(),v.Ob(),v.Ob()),2&t){const t=v.hc(15);v.Ab(3),v.fc("ngSwitch",v.cc(4,9,e.loading$)),v.Ab(2),v.fc("ngSwitchCase",!0),v.Ab(1),v.fc("ngSwitchCase",!1),v.Ab(3),v.fc("ngIf",v.cc(10,11,e.backward$)),v.Ab(3),v.fc("readonly",e.readonlyTextInput)("matDatepicker",t)("formControl",e.dateControl),v.Ab(1),v.fc("for",t),v.Ab(3),v.fc("ngIf",v.cc(17,13,e.forward$))}},directives:[P.c,P.a,P.b,y.n,y.o,M.a,P.d,y.l,j.b,$.b,L.b,i.b,i.i,i.d,L.d,j.e,L.a,I.b,K,F.b,T.a],pipes:[y.b],styles:["[_nghost-%COMP%] > .page[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > .content-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > .content-container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{padding:1rem}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > .content-container[_ngcontent-%COMP%] > .apod-card[_ngcontent-%COMP%]{max-width:960px}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > footer[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > footer[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:50px;height:50px;line-height:50px}[_nghost-%COMP%] > .page[_ngcontent-%COMP%] > footer[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:50px;width:50px;height:50px;line-height:50px}"]}),t})()}];let z=(()=>{class t{}return t.\u0275mod=v.Ib({type:t}),t.\u0275inj=v.Hb({factory:function(e){return new(e||t)},imports:[[o.d.forChild(V)],o.d]}),t})(),H=(()=>{class t{}return t.\u0275mod=v.Ib({type:t}),t.\u0275inj=v.Hb({factory:function(e){return new(e||t)},imports:[[a.a,z]]}),t})()}}]);